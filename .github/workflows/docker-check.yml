name: Docker Build Check

# Uruchamiaj tylko na Twoich branchach
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-docker-images:
    # WAŻNE: Używamy Twojej maszyny wirtualnej (runnera)
    runs-on: self-hosted
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Docker diagnostics
      run: |
        echo "USER: $(whoami)"
        docker --version || true
        groups || true
        docker info || true

    - name: Build Backend Image
      # Buduje backend używając Twojego pliku DockerfileBuild
      run: docker build -f DockerfileBuild -t demo-backend:test .

    - name: Build Frontend Image
      # Buduje frontend używając Twojego pliku DockerfileFrontend
      run: docker build -f DockerfileFrontend -t demo-frontend:test .